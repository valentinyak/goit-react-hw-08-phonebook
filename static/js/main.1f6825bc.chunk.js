(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{103:function(e,t,n){},125:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(2),u=n(0),s=n.n(u),o=n(12),l=n.n(o),j=n(9),b=n(26),d=n(82),f=(n(103),n(54)),p=n(10),O=n(30),h=n(83),x=n.n(h),m=n(7),v=n(20),g=Object(p.b)("contacts/fetchContactsRequest"),k=Object(p.b)("contacts/fetchContactsSuccess"),C=Object(p.b)("contacts/fetchContactsError"),y=Object(p.b)("contacts/addContactsRequest"),w=Object(p.b)("contacts/addContactsSuccess"),L=Object(p.b)("contacts/addContactsError"),I=Object(p.b)("contacts/deleteContactsRequest"),z=Object(p.b)("contacts/deleteContactsSuccess"),N=Object(p.b)("contacts/deleteContactsError"),U=Object(p.b)("filter/changeFilter"),R=Object(p.d)("",Object(m.a)({},U,(function(e,t){return t.payload}))),_=Object(p.d)([],(r={},Object(m.a)(r,k,(function(e,t){return t.payload})),Object(m.a)(r,w,(function(e,t){return[].concat(Object(f.a)(e),[t.payload])})),Object(m.a)(r,z,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n.id}))})),r)),E=Object(p.d)(!1,(a={},Object(m.a)(a,g,(function(){return!0})),Object(m.a)(a,k,(function(){return!1})),Object(m.a)(a,C,(function(){return!1})),Object(m.a)(a,y,(function(){return!0})),Object(m.a)(a,w,(function(){return!1})),Object(m.a)(a,L,(function(){return!1})),Object(m.a)(a,I,(function(){return!0})),Object(m.a)(a,z,(function(){return!1})),Object(m.a)(a,N,(function(){return!1})),a)),F=Object(p.d)(null,(c={},Object(m.a)(c,C,(function(e,t){return t.payload})),Object(m.a)(c,g,(function(){return null})),Object(m.a)(c,k,(function(){return null})),Object(m.a)(c,L,(function(e,t){return t.payload})),Object(m.a)(c,y,(function(){return null})),Object(m.a)(c,w,(function(){return null})),Object(m.a)(c,N,(function(e,t){return t.payload})),Object(m.a)(c,I,(function(){return null})),Object(m.a)(c,z,(function(){return null})),c)),T=Object(v.c)({items:_,isLoading:E,error:F,filter:R}),D=n(19),P=n.n(D),S=n(29),A=n(21),W=n.n(A);W.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var V,q=function(e){W.a.defaults.headers.common.Authorization="Bearer ".concat(e)},Y=function(){W.a.defaults.headers.common.Authorization=""},B=Object(p.c)("auth/register",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/signup",t);case 3:return r=e.sent,a=r.data,q(a.token),a.isLoggedIn=!0,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),H=Object(p.c)("auth/login",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/login",t);case 3:return r=e.sent,a=r.data,q(a.token),a.isLoggedIn=!0,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),J={register:B,logOut:Object(p.c)("auth/logout",function(){var e=Object(S.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/logout");case 3:Y(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:H,fetchCurrentUser:Object(p.c)("auth/refresh",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return q(a),e.prev=5,e.next=8,W.a.get("/users/current");case 8:return c=e.sent,i=c.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},M=Object(p.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(V={},Object(m.a)(V,J.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(V,J.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(V,J.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(m.a)(V,J.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(m.a)(V,J.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),Object(m.a)(V,J.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),V)}).reducer,G=Object(f.a)(Object(p.f)({serializableCheck:{ignoredActions:[O.a,O.f,O.b,O.c,O.d,O.e]}})),K={key:"auth",storage:x.a,whitelist:["token"]},Q=Object(p.a)({reducer:{auth:Object(O.g)(K,M),contacts:T},middleware:G,devTools:!1}),X=Object(O.h)(Q),Z=n(15),$=n(167),ee=n(164),te=n(84),ne=n.n(te),re=n(168);W.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ae=function(e){return W.a.post("/contacts",e).then((function(e){return e.data}))},ce=function(e){W.a.delete("/contacts/".concat(e.id))};W.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ie=n(47),ue=function(e){return e.contacts.items},se=Object(ie.a)([ue,function(e,t){return t}],(function(e,t){return e.find((function(e){return e.id===t}))}));n(125);var oe=Object(j.b)(null,(function(e){return{addContact:function(t){return e(function(e){return function(){var t=Object(S.a)(P.a.mark((function t(n){var r;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y()),t.prev=1,t.next=4,ae(e);case 4:r=t.sent,n(w(r)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n(L(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.addContact,n=Object(j.d)((function(e){return e}));return Object(i.jsxs)("form",{children:[Object(i.jsx)("span",{children:"Add a contact"}),Object(i.jsx)(re.a,{label:"Contact name",variant:"outlined",size:"small",name:"nameInput",style:{margin:"7px"}}),Object(i.jsx)(re.a,{label:"Contact number",variant:"outlined",size:"small",name:"phoneInput",style:{margin:"7px"}}),Object(i.jsx)(ee.a,{size:"small",color:"secondary","aria-label":"add",onClick:function(e){e.preventDefault();var r=e.currentTarget.form,a=r.nameInput,c=r.phoneInput;ue(n).find((function(e){return e.name===a.value}))?alert("".concat(a.value," is already in contacts")):(t({name:a.value,number:c.value}),a.value="",c.value="")},children:Object(i.jsx)(ne.a,{})})]})})),le=n(165),je=n(85),be=n.n(je);function de(e){var t=e.contact,n=e.onClick,r=t.name,a=t.number,c=t.id;return Object(i.jsxs)("span",{children:[r,": ",a," ",Object(i.jsx)(le.a,{"aria-label":"delete",style:{width:"5px",height:"5px"},id:c,onClick:n,children:Object(i.jsx)(be.a,{})})]})}var fe=function(e){return e.contacts.filter},pe=Object(ie.a)([ue,fe],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}));var Oe=Object(j.b)((function(e){return{contacts:pe(e)}}),(function(e){return{onDelete:function(t){return e(function(e){return function(){var t=Object(S.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I());try{ce(e),n(z(e))}catch(r){n(N(r))}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.contacts,n=e.onDelete,r=Object(j.c)(),a=Object(j.d)((function(e){return e})),c=function(e){var t=se(a,e.currentTarget.id);n(t)};return Object(u.useEffect)((function(){return r(function(){var e=Object(S.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,W.a.get("/contacts").then((function(e){return e.data}));case 4:n=e.sent,t(k(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(C(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[r]),Object(i.jsx)("ul",{style:{textAlign:"left"},children:t.map((function(e){return Object(i.jsx)("li",{children:Object(i.jsx)(de,{contact:e,onClick:c})},e.id)}))})}));var he=Object(j.b)((function(e){return{value:fe(e)}}),(function(e){return{onChange:function(t){return e(U(t.currentTarget.value))}}}))((function(e){var t=e.value,n=e.onChange;return Object(i.jsx)(re.a,{label:"Find contact by name",variant:"outlined",size:"small",name:"filterInput",onChange:n,value:t})})),xe=function(e){return e.auth.user.email},me=function(e){return e.auth.isLoggedIn},ve=function(e){return e.auth.isFetchingCurrentUser};function ge(){var e=Object(j.d)(me);return Object(i.jsx)("main",{children:e?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(oe,{}),Object(i.jsx)("h2",{children:"Your contacts"}),Object(i.jsx)(he,{}),Object(i.jsx)(Oe,{})]}):Object(i.jsx)("h1",{children:"Please, Login or Register."})})}function ke(){return Object(i.jsx)("main",{children:Object(i.jsx)("h1",{children:"Your phonebook here! Please Log in or Register."})})}var Ce=n(45),ye=n.n(Ce);function we(){var e=Object(j.d)(me);return Object(i.jsxs)("nav",{children:[Object(i.jsx)(b.b,{to:"/",exact:!0,className:ye.a.link,activeClassName:ye.a.activeLink,children:"Home"}),e&&Object(i.jsx)(b.b,{to:"/contacts",exact:!0,className:ye.a.link,activeClassName:ye.a.activeLink,children:"Contacts"})]})}var Le=n(46),Ie=n.n(Le);function ze(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(b.b,{to:"/register",exact:!0,className:Ie.a.link,activeClassName:Ie.a.activeLink,children:"Register"}),Object(i.jsx)(b.b,{to:"/login",exact:!0,className:Ie.a.link,activeClassName:Ie.a.activeLink,children:"Login"})]})}var Ne=n(166);function Ue(){var e=Object(j.c)(),t=Object(j.d)(xe);return Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"You are logged in as ".concat(t," ")}),Object(i.jsx)(Ne.a,{variant:"contained",size:"small",style:{marginRight:"15px"},onClick:function(){return e(J.logOut())},children:"Logout"})]})}var Re={form:{width:"400px",padding:"10px",border:"1px solid black"},inputContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"250px",margin:"10px"}};function _e(){var e=Object(j.c)();return Object(i.jsxs)("main",{children:[Object(i.jsx)("h2",{children:"Please fill these fields for register"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target,r=n.name,a=n.email,c=n.password;e(J.register({name:r.value,email:a.value,password:c.value}))},style:Re.form,children:[Object(i.jsx)(re.a,{label:"Email",variant:"outlined",size:"small",name:"email",autoComplete:"email",style:{margin:"10px"}}),Object(i.jsx)(re.a,{label:"Name",variant:"outlined",size:"small",name:"name",autoComplete:"username",style:{margin:"10px"}}),Object(i.jsx)(re.a,{label:"Password",variant:"outlined",size:"small",type:"password",name:"password",autoComplete:"current-password",style:{margin:"10px"}}),Object(i.jsx)(Ne.a,{variant:"contained",size:"small",type:"submit",children:"Register"})]})]})}var Ee={form:{width:"400px",padding:"10px",border:"1px solid black"},inputContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"250px",margin:"10px"}};function Fe(){var e=Object(j.c)();return Object(i.jsxs)("main",{children:[Object(i.jsx)("h2",{children:"Please log in to see your contacts"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target,r=n.email,a=n.password;e(J.logIn({email:r.value,password:a.value}))},style:Ee.form,children:[Object(i.jsx)(re.a,{label:"Email",variant:"outlined",size:"small",name:"email",autoComplete:"email",style:{margin:"10px"}}),Object(i.jsx)(re.a,{label:"Password",variant:"outlined",size:"small",type:"password",name:"password",autoComplete:"current-password",style:{margin:"10px"}}),Object(i.jsx)(Ne.a,{variant:"contained",size:"small",type:"submit",children:"LogIn"})]})]})}var Te=n(42),De=n(55);function Pe(e){var t=e.children,n=Object(De.a)(e,["children"]),r=Object(j.d)(me);return Object(i.jsx)(Z.b,Object(Te.a)(Object(Te.a)({},n),{},{children:r?t:Object(i.jsx)(Z.a,{to:n.redirectTo})}))}function Se(e){var t=e.children,n=Object(De.a)(e,["children"]),r=Object(j.d)(me),a=n.restricted,c=r&&a;return Object(i.jsx)(Z.b,Object(Te.a)(Object(Te.a)({},n),{},{children:c?Object(i.jsx)(Z.a,{to:n.redirectTo}):t}))}function Ae(){var e=Object(j.d)(me),t=Object(j.d)(ve),n=Object(j.c)();return Object(u.useEffect)((function(){n(J.fetchCurrentUser())}),[n]),!t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)($.a,{position:"static",style:{flexDirection:"row",minHeight:"60px"},children:[Object(i.jsx)(we,{}),e?Object(i.jsx)(Ue,{}):Object(i.jsx)(ze,{})]}),Object(i.jsxs)(Z.d,{children:[Object(i.jsx)(Se,{exact:!0,path:"/",children:Object(i.jsx)(ke,{})}),Object(i.jsx)(Se,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(i.jsx)(_e,{})}),Object(i.jsx)(Se,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(i.jsx)(Fe,{})}),Object(i.jsx)(Pe,{path:"/contacts",redirectTo:"/login",children:Object(i.jsx)(ge,{})})]})]})}l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(j.a,{store:Q,children:Object(i.jsx)(d.a,{loading:null,persistor:X,children:Object(i.jsx)(b.a,{children:Object(i.jsx)(Ae,{})})})})}),document.getElementById("root"))},45:function(e,t,n){e.exports={link:"Navigation_link__2QdEW",activeLink:"Navigation_activeLink__1MPKb"}},46:function(e,t,n){e.exports={link:"AuthNav_link__2qbr7",activeLink:"AuthNav_activeLink__3mGbv"}}},[[131,1,2]]]);
//# sourceMappingURL=main.1f6825bc.chunk.js.map