(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{105:function(e,t,n){},135:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(2),s=n(0),u=n.n(s),o=n(12),l=n.n(o),j=n(9),b=n(26),d=n(83),f=(n(105),n(55)),p=n(10),O=n(30),h=n(84),x=n.n(h),m=n(7),v=n(20),g=Object(p.b)("contacts/fetchContactsRequest"),k=Object(p.b)("contacts/fetchContactsSuccess"),y=Object(p.b)("contacts/fetchContactsError"),C=Object(p.b)("contacts/addContactsRequest"),w=Object(p.b)("contacts/addContactsSuccess"),L=Object(p.b)("contacts/addContactsError"),I=Object(p.b)("contacts/deleteContactsRequest"),z=Object(p.b)("contacts/deleteContactsSuccess"),N=Object(p.b)("contacts/deleteContactsError"),U=Object(p.b)("filter/changeFilter"),_=Object(p.d)("",Object(m.a)({},U,(function(e,t){return t.payload}))),R=Object(p.d)([],(r={},Object(m.a)(r,k,(function(e,t){return t.payload})),Object(m.a)(r,w,(function(e,t){return[].concat(Object(f.a)(e),[t.payload])})),Object(m.a)(r,z,(function(e,t){var n=t.payload;return e.filter((function(e){return e.id!==n.id}))})),r)),E=Object(p.d)(!1,(a={},Object(m.a)(a,g,(function(){return!0})),Object(m.a)(a,k,(function(){return!1})),Object(m.a)(a,y,(function(){return!1})),Object(m.a)(a,C,(function(){return!0})),Object(m.a)(a,w,(function(){return!1})),Object(m.a)(a,L,(function(){return!1})),Object(m.a)(a,I,(function(){return!0})),Object(m.a)(a,z,(function(){return!1})),Object(m.a)(a,N,(function(){return!1})),a)),F=Object(p.d)(null,(c={},Object(m.a)(c,y,(function(e,t){return t.payload})),Object(m.a)(c,g,(function(){return null})),Object(m.a)(c,k,(function(){return null})),Object(m.a)(c,L,(function(e,t){return t.payload})),Object(m.a)(c,C,(function(){return null})),Object(m.a)(c,w,(function(){return null})),Object(m.a)(c,N,(function(e,t){return t.payload})),Object(m.a)(c,I,(function(){return null})),Object(m.a)(c,z,(function(){return null})),c)),T=Object(v.c)({items:R,isLoading:E,error:F,filter:_}),D=n(19),P=n.n(D),S=n(29),A=n(23),W=n.n(A);W.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var V,q=function(e){W.a.defaults.headers.common.Authorization="Bearer ".concat(e)},Y=function(){W.a.defaults.headers.common.Authorization=""},B=Object(p.c)("auth/register",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/signup",t);case 3:return r=e.sent,a=r.data,q(a.token),a.isLoggedIn=!0,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),H=Object(p.c)("auth/login",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/login",t);case 3:return r=e.sent,a=r.data,q(a.token),a.isLoggedIn=!0,e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),J={register:B,logOut:Object(p.c)("auth/logout",function(){var e=Object(S.a)(P.a.mark((function e(t,n){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/logout");case 3:Y(),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()),logIn:H,fetchCurrentUser:Object(p.c)("auth/refresh",function(){var e=Object(S.a)(P.a.mark((function e(t,n){var r,a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return q(a),e.prev=5,e.next=8,W.a.get("/users/current");case 8:return c=e.sent,i=c.data,e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),alert(e.t0.message),e.abrupt("return",n.rejectWithValue());case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())},M=Object(p.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(V={},Object(m.a)(V,J.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(V,J.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(m.a)(V,J.logOut.fulfilled,(function(e){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(m.a)(V,J.fetchCurrentUser.pending,(function(e){e.isFetchingCurrentUser=!0})),Object(m.a)(V,J.fetchCurrentUser.rejected,(function(e){e.isFetchingCurrentUser=!1})),Object(m.a)(V,J.fetchCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isFetchingCurrentUser=!1})),V)}).reducer,G=Object(f.a)(Object(p.f)({serializableCheck:{ignoredActions:[O.a,O.f,O.b,O.c,O.d,O.e]}})),K={key:"auth",storage:x.a,whitelist:["token"]},Q=Object(p.a)({reducer:{auth:Object(O.g)(K,M),contacts:T},middleware:G,devTools:!1}),X=Object(O.h)(Q),Z=n(15),$=n(177),ee=n(85),te=n.n(ee),ne=n(174),re=n(86),ae=n.n(re),ce=n(178);W.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var ie=function(e){W.a.post("/contacts",e)},se=function(e){W.a.delete("/contacts/".concat(e.id))},ue=n(48),oe=function(e){return e.contacts.items},le=Object(ue.a)([oe,function(e,t){return t}],(function(e,t){return e.find((function(e){return e.id===t}))}));n(135);var je=Object(j.b)(null,(function(e){return{addContact:function(t){return e(function(e){return function(){var t=Object(S.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(C());try{ie(e),n(w(e))}catch(r){n(L(r))}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.addContact,n=Object(j.d)((function(e){return e}));return Object(i.jsxs)("form",{children:[Object(i.jsx)("span",{children:"Add a contact"}),Object(i.jsx)(ce.a,{label:"Contact name",variant:"outlined",size:"small",name:"nameInput",style:{margin:"7px"}}),Object(i.jsx)(ce.a,{label:"Contact number",variant:"outlined",size:"small",name:"phoneInput",style:{margin:"7px"}}),Object(i.jsx)(ne.a,{size:"small",color:"secondary","aria-label":"add",onClick:function(e){e.preventDefault();var r=e.currentTarget.form,a=r.nameInput,c=r.phoneInput;oe(n).find((function(e){return e.name===a.value}))?alert("".concat(a.value," is already in contacts")):(t({id:te.a.generate(),name:a.value,number:c.value}),a.value="",c.value="")},children:Object(i.jsx)(ae.a,{})})]})})),be=n(175),de=n(87),fe=n.n(de);function pe(e){var t=e.contact,n=e.onClick,r=t.name,a=t.number,c=t.id;return Object(i.jsxs)("span",{children:[r,": ",a," ",Object(i.jsx)(be.a,{"aria-label":"delete",style:{width:"5px",height:"5px"},id:c,onClick:n,children:Object(i.jsx)(fe.a,{})})]})}var Oe=function(e){return e.contacts.filter},he=Object(ue.a)([oe,Oe],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}));var xe=Object(j.b)((function(e){return{contacts:he(e)}}),(function(e){return{onDelete:function(t){return e(function(e){return function(){var t=Object(S.a)(P.a.mark((function t(n){return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(I());try{se(e),n(z(e))}catch(r){n(N(r))}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t=e.contacts,n=e.onDelete,r=Object(j.c)(),a=Object(j.d)((function(e){return e})),c=function(e){var t=le(a,e.currentTarget.id);n(t)};return Object(s.useEffect)((function(){return r(function(){var e=Object(S.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,W.a.get("/contacts").then((function(e){return e.data}));case 4:n=e.sent,t(k(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(y(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[r]),Object(i.jsx)("ul",{style:{textAlign:"left"},children:t.map((function(e){return Object(i.jsx)("li",{children:Object(i.jsx)(pe,{contact:e,onClick:c})},e.id)}))})}));var me=Object(j.b)((function(e){return{value:Oe(e)}}),(function(e){return{onChange:function(t){return e(U(t.currentTarget.value))}}}))((function(e){var t=e.value,n=e.onChange;return Object(i.jsx)(ce.a,{label:"Find contact by name",variant:"outlined",size:"small",name:"filterInput",onChange:n,value:t})})),ve=function(e){return e.auth.user.email},ge=function(e){return e.auth.isLoggedIn},ke=function(e){return e.auth.isFetchingCurrentUser};function ye(){var e=Object(j.d)(ge);return Object(i.jsx)("main",{children:e?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:"Phonebook"}),Object(i.jsx)(je,{}),Object(i.jsx)("h2",{children:"Your contacts"}),Object(i.jsx)(me,{}),Object(i.jsx)(xe,{})]}):Object(i.jsx)("h1",{children:"Please, Login or Register."})})}function Ce(){return Object(i.jsx)("main",{children:Object(i.jsx)("h1",{children:"Your phonebook here! Please Log in or Register."})})}var we=n(45),Le=n.n(we);function Ie(){var e=Object(j.d)(ge);return Object(i.jsxs)("nav",{children:[Object(i.jsx)(b.b,{to:"/",exact:!0,className:Le.a.link,activeClassName:Le.a.activeLink,children:"Home"}),e&&Object(i.jsx)(b.b,{to:"/contacts",exact:!0,className:Le.a.link,activeClassName:Le.a.activeLink,children:"Contacts"})]})}var ze=n(46),Ne=n.n(ze);function Ue(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(b.b,{to:"/register",exact:!0,className:Ne.a.link,activeClassName:Ne.a.activeLink,children:"Register"}),Object(i.jsx)(b.b,{to:"/login",exact:!0,className:Ne.a.link,activeClassName:Ne.a.activeLink,children:"Login"})]})}var _e=n(176);function Re(){var e=Object(j.c)(),t=Object(j.d)(ve);return Object(i.jsxs)("div",{children:[Object(i.jsx)("span",{children:"You are logged in as ".concat(t," ")}),Object(i.jsx)(_e.a,{variant:"contained",size:"small",style:{marginRight:"15px"},onClick:function(){return e(J.logOut())},children:"Logout"})]})}var Ee={form:{width:"400px",padding:"10px",border:"1px solid black"},inputContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"250px",margin:"10px"}};function Fe(){var e=Object(j.c)();return Object(i.jsxs)("main",{children:[Object(i.jsx)("h2",{children:"Please fill these fields for register"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target,r=n.name,a=n.email,c=n.password;e(J.register({name:r.value,email:a.value,password:c.value}))},style:Ee.form,children:[Object(i.jsx)(ce.a,{label:"Email",variant:"outlined",size:"small",name:"email",autoComplete:"email",style:{margin:"10px"}}),Object(i.jsx)(ce.a,{label:"Name",variant:"outlined",size:"small",name:"name",autoComplete:"username",style:{margin:"10px"}}),Object(i.jsx)(ce.a,{label:"Password",variant:"outlined",size:"small",type:"password",name:"password",autoComplete:"current-password",style:{margin:"10px"}}),Object(i.jsx)(_e.a,{variant:"contained",size:"small",type:"submit",children:"Register"})]})]})}var Te={form:{width:"400px",padding:"10px",border:"1px solid black"},inputContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",width:"250px",margin:"10px"}};function De(){var e=Object(j.c)();return Object(i.jsxs)("main",{children:[Object(i.jsx)("h2",{children:"Please log in to see your contacts"}),Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target,r=n.email,a=n.password;e(J.logIn({email:r.value,password:a.value}))},style:Te.form,children:[Object(i.jsx)(ce.a,{label:"Email",variant:"outlined",size:"small",name:"email",autoComplete:"email",style:{margin:"10px"}}),Object(i.jsx)(ce.a,{label:"Password",variant:"outlined",size:"small",type:"password",name:"password",autoComplete:"current-password",style:{margin:"10px"}}),Object(i.jsx)(_e.a,{variant:"contained",size:"small",type:"submit",children:"LogIn"})]})]})}var Pe=n(42),Se=n(56);function Ae(e){var t=e.children,n=Object(Se.a)(e,["children"]),r=Object(j.d)(ge);return Object(i.jsx)(Z.b,Object(Pe.a)(Object(Pe.a)({},n),{},{children:r?t:Object(i.jsx)(Z.a,{to:n.redirectTo})}))}function We(e){var t=e.children,n=Object(Se.a)(e,["children"]),r=Object(j.d)(ge),a=n.restricted,c=r&&a;return Object(i.jsx)(Z.b,Object(Pe.a)(Object(Pe.a)({},n),{},{children:c?Object(i.jsx)(Z.a,{to:n.redirectTo}):t}))}function Ve(){var e=Object(j.d)(ge),t=Object(j.d)(ke),n=Object(j.c)();return Object(s.useEffect)((function(){n(J.fetchCurrentUser())}),[n]),!t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)($.a,{position:"static",style:{flexDirection:"row",minHeight:"60px"},children:[Object(i.jsx)(Ie,{}),e?Object(i.jsx)(Re,{}):Object(i.jsx)(Ue,{})]}),Object(i.jsxs)(Z.d,{children:[Object(i.jsx)(We,{exact:!0,path:"/",children:Object(i.jsx)(Ce,{})}),Object(i.jsx)(We,{exact:!0,path:"/register",restricted:!0,redirectTo:"/contacts",children:Object(i.jsx)(Fe,{})}),Object(i.jsx)(We,{exact:!0,path:"/login",restricted:!0,redirectTo:"/contacts",children:Object(i.jsx)(De,{})}),Object(i.jsx)(Ae,{path:"/contacts",redirectTo:"/login",children:Object(i.jsx)(ye,{})})]})]})}l.a.render(Object(i.jsx)(u.a.StrictMode,{children:Object(i.jsx)(j.a,{store:Q,children:Object(i.jsx)(d.a,{loading:null,persistor:X,children:Object(i.jsx)(b.a,{children:Object(i.jsx)(Ve,{})})})})}),document.getElementById("root"))},45:function(e,t,n){e.exports={link:"Navigation_link__2QdEW",activeLink:"Navigation_activeLink__1MPKb"}},46:function(e,t,n){e.exports={link:"AuthNav_link__2qbr7",activeLink:"AuthNav_activeLink__3mGbv"}}},[[141,1,2]]]);
//# sourceMappingURL=main.bcaf8c76.chunk.js.map